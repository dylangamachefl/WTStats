(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{27116:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>er});var t=s(95155),r=s(12115),n=s(35695),l=s(30285),i=s(66695),d=s(59409),o=s(85127),c=s(68856),m=s(46102),x=s(27150);let u=(0,s(40157).A)("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);var h=s(43380),p=s(99145),f=s(60335),v=s(80659),g=s(77070),_=s(192),j=s(30356),N=s(85057),y=s(26126),b=s(85185),A=s(6101),k=s(46081),w=s(5845),P=s(45503),E=s(11275),D=s(63655),S="Switch",[M,F]=(0,k.A)(S),[O,B]=M(S),R=r.forwardRef((e,a)=>{let{__scopeSwitch:s,name:n,checked:l,defaultChecked:i,required:d,disabled:o,value:c="on",onCheckedChange:m,form:x,...u}=e,[h,p]=r.useState(null),f=(0,A.s)(a,e=>p(e)),v=r.useRef(!1),g=!h||x||!!h.closest("form"),[_=!1,j]=(0,w.i)({prop:l,defaultProp:i,onChange:m});return(0,t.jsxs)(O,{scope:s,checked:_,disabled:o,children:[(0,t.jsx)(D.sG.button,{type:"button",role:"switch","aria-checked":_,"aria-required":d,"data-state":H(_),"data-disabled":o?"":void 0,disabled:o,value:c,...u,ref:f,onClick:(0,b.m)(e.onClick,e=>{j(e=>!e),g&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})}),g&&(0,t.jsx)(Z,{control:h,bubbles:!v.current,name:n,value:c,checked:_,required:d,disabled:o,form:x,style:{transform:"translateX(-100%)"}})]})});R.displayName=S;var C="SwitchThumb",G=r.forwardRef((e,a)=>{let{__scopeSwitch:s,...r}=e,n=B(C,s);return(0,t.jsx)(D.sG.span,{"data-state":H(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:a})});G.displayName=C;var Z=e=>{let{control:a,checked:s,bubbles:n=!0,...l}=e,i=r.useRef(null),d=(0,P.Z)(s),o=(0,E.X)(a);return r.useEffect(()=>{let e=i.current,a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==s&&a){let t=new Event("click",{bubbles:n});a.call(e,s),e.dispatchEvent(t)}},[d,s,n]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...l,tabIndex:-1,ref:i,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function H(e){return e?"checked":"unchecked"}let I=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(R,{className:(0,_.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:a,children:(0,t.jsx)(G,{className:(0,_.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});I.displayName=R.displayName;var T=s(83540),W=s(3401),L=s(94754),V=s(96025),z=s(16238),X=s(94517),J=s(83394),$=s(54811);let q=[{id:"2024",year:2024},{id:"2023",year:2023},{id:"2022",year:2022},{id:"2021",year:2021},{id:"2020",year:2020},{id:"2019",year:2019},{id:"2018",year:2018},{id:"2017",year:2017},{id:"2016",year:2016},{id:"2015",year:2015},{id:"2014",year:2014},{id:"2013",year:2013},{id:"2012",year:2012},{id:"2011",year:2011},{id:"2009",year:2009}].sort((e,a)=>a.year-e.year),U=[{id:"1",name:"Jack"},{id:"2",name:"Josh"},{id:"3",name:"Jake"},{id:"4",name:"Mark"},{id:"5",name:"Sean"},{id:"6",name:"Nick"},{id:"7",name:"Will"},{id:"8",name:"Zach"},{id:"9",name:"Lac"},{id:"11",name:"Chris"},{id:"12",name:"Dylan"},{id:"13",name:"Dan"},{id:"14",name:"Fitz"}],K={avg_pvdre:{label:"POE",key:"avg_pvdre",format:e=>"number"==typeof e?e.toFixed(1):"-",tooltipLabel:"POE (Points Over Expected)",description:"Points Over Expected (POE) shows average points scored by drafted players over a baseline expectation. Colors relative to average (green=above, red=below, neutral=mid-range)."},pvdre_hit_rate:{label:"Hit Rate %",key:"pvdre_hit_rate",format:e=>"number"==typeof e?(100*e).toFixed(1)+"%":"-",tooltipLabel:"Hit Rate %",description:"Hit Rate % indicates the percentage of draft picks that met or exceeded expected performance. Colors relative to average (green=above, red=below, neutral=mid-range)."},avg_value_vs_adp:{label:"Value vs ADP",key:"avg_value_vs_adp",format:e=>"number"==typeof e?e.toFixed(1):"-",tooltipLabel:"Avg Value vs ADP",description:"Average Value vs ADP measures draft value relative to Average Draft Position. Green for positive (steal), red for negative (reach)."}},Y=()=>{var e,a;let[s,n]=(0,r.useState)(null),[d,f]=(0,r.useState)(null),[v,g]=(0,r.useState)(!0),[b,A]=(0,r.useState)(null),[k,w]=(0,r.useState)({key:"gm_name",direction:"asc"}),[P,E]=(0,r.useState)("avg_pvdre"),{currentMin:D,currentMax:S}=(0,r.useMemo)(()=>{if(!d||!Array.isArray(d))return{currentMin:0,currentMax:0};let e=d.map(e=>e[P]).filter(e=>"number"==typeof e);return 0===e.length?{currentMin:0,currentMax:0}:{currentMin:Math.min(...e),currentMax:Math.max(...e)}},[d,P]),{minGmAvg:M,maxGmAvg:F}=(0,r.useMemo)(()=>{if(!(null==s?void 0:s.gmAverages)||!Array.isArray(s.gmAverages))return{minGmAvg:0,maxGmAvg:0};let e=s.gmAverages.map(e=>e[P]).filter(e=>"number"==typeof e);return 0===e.length?{minGmAvg:0,maxGmAvg:0}:{minGmAvg:Math.min(...e),maxGmAvg:Math.max(...e)}},[null==s?void 0:s.gmAverages,P]),{minSeasonAvg:O,maxSeasonAvg:B}=(0,r.useMemo)(()=>{if(!(null==s?void 0:s.seasonAverages)||!Array.isArray(s.seasonAverages))return{minSeasonAvg:0,maxSeasonAvg:0};let e=s.seasonAverages.map(e=>e[P]).filter(e=>"number"==typeof e);return 0===e.length?{minSeasonAvg:0,maxSeasonAvg:0}:{minSeasonAvg:Math.min(...e),maxSeasonAvg:Math.max(...e)}},[null==s?void 0:s.seasonAverages,P]),R=(0,r.useMemo)(()=>{if(!d||0===d.length)return null;let e=d.map(e=>e[P]).filter(e=>"number"==typeof e);return 0===e.length?null:e.reduce((e,a)=>e+a,0)/e.length},[d,P]);(0,r.useEffect)(()=>{(async()=>{g(!0),A(null);try{let e="/data/draft_data/gm_season_performance_grid.json";console.log("[DraftOverview] Fetching ".concat(e));let a=await fetch(e);if(!a.ok){let e=await a.text();throw console.error("[DraftOverview] Fetch failed:",a.status,e),Error("Failed to fetch data: ".concat(a.status," ").concat(a.statusText,". ").concat(e.substring(0,100)))}let s=await a.json();console.log("[DraftOverview] Fetched data:",s),n(s),f(s.gmSeasonPerformanceGrid||null)}catch(e){e instanceof Error?A(e.message):A("An unknown error occurred"),console.error("[DraftOverview] Error in fetchData:",e),n(null),f(null)}finally{g(!1)}})()},[]);let{heatmapData:C,gmNames:G,seasonYears:Z}=(0,r.useMemo)(()=>{if(!d)return{heatmapData:{},gmNames:[],seasonYears:[]};let e=d.filter(e=>"string"==typeof e.gm_name&&"number"==typeof e.season_id),a=e.reduce((e,a)=>(e[a.gm_name]||(e[a.gm_name]={}),e[a.gm_name][a.season_id.toString()]=a,e),{}),s=Array.from(new Set(e.map(e=>e.gm_name))),t=new Map;return e.forEach(e=>{t.has(e.gm_name)||t.set(e.gm_name,[]),t.get(e.gm_name).push(e)}),"gm_name"===k.key&&s.sort((e,a)=>{let s=e.localeCompare(a);return"asc"===k.direction?s:-s}),{heatmapData:a,gmNames:s,seasonYears:Array.from(new Set(e.map(e=>e.season_id.toString()))).sort((e,a)=>parseInt(e)-parseInt(a))}},[d,k]),H=(e,a,s,t)=>{let r=null==e?void 0:e[a];if(null==r)return"bg-muted/30 text-muted-foreground";let n="font-semibold ";if("avg_value_vs_adp"===a){if(r>.1){let e=Math.min(1,Math.max(0,r/Math.max(.11000000000000001,t)));return e>.66?n+"bg-green-300 text-green-800":e>.33?n+"bg-green-200 text-green-800":n+"bg-green-100 text-green-700"}if(!(r<-.1))return n+"bg-neutral-100 text-neutral-700";{let e=Math.min(1,Math.max(0,r/Math.min(-.11000000000000001,s)));return e>.66?n+"bg-red-300 text-red-800":e>.33?n+"bg-red-200 text-red-800":n+"bg-red-100 text-red-700"}}{let e=t-s;if(0===e)return n+"bg-neutral-100 text-neutral-700";let a=(r-s)/e;if(a>=.4&&a<=.6)return n+"bg-neutral-100 text-neutral-700";if(a<.4){let e=Math.min(1,(.4-a)/.4);return e>.66?n+"bg-red-300 text-red-800":e>.33?n+"bg-red-200 text-red-800":n+"bg-red-100 text-red-700"}{let e=Math.min(1,(a-.6)/.4);return e>.66?n+"bg-green-300 text-green-800":e>.33?n+"bg-green-200 text-green-800":n+"bg-green-100 text-green-700"}}},I=e=>{let a="asc";k.key===e&&"asc"===k.direction&&(a="desc"),w({key:e,direction:a})};return v?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u,{})," Draft Performance Heatmap"]}),(0,t.jsx)(i.BT,{children:"Loading GM draft performance metrics across seasons..."})]}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsx)(c.E,{className:"h-8 w-1/2 mb-4"})," ",(0,t.jsx)("div",{className:"space-y-2",children:[...Array(10)].map((e,a)=>(0,t.jsx)(c.E,{className:"h-10 w-full"},a))})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mt-6",children:[(0,t.jsx)(c.E,{className:"h-64 w-full"}),(0,t.jsx)(c.E,{className:"h-64 w-full"})]})]}):b?(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u,{})," Draft Performance Heatmap"]}),(0,t.jsx)(i.BT,{children:(null===(e=K[P])||void 0===e?void 0:e.description)||"GM draft performance metrics across seasons. Colors indicate performance relative to the average."})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)("p",{className:"text-destructive",children:["Error loading draft performance data: ",b]})})]}):s&&d&&0!==d.length?(0,t.jsx)(m.Bc,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u,{})," Draft Performance Heatmap"]}),(0,t.jsxs)(i.BT,{children:[K[P].description," Hover over a cell for more details."]})]}),(0,t.jsx)(j.z,{value:P,onValueChange:e=>E(e),className:"flex flex-wrap gap-x-4 gap-y-2 mt-4 sm:mt-0",children:Object.values(K).map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(j.C,{value:e.key,id:e.key}),(0,t.jsx)(N.J,{htmlFor:e.key,className:"text-sm cursor-pointer",children:e.label})]},e.key))})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(o.XI,{className:"min-w-full border-collapse",children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{className:"sticky left-0 bg-card z-10 p-2 border text-xs md:text-sm",children:(0,t.jsxs)(l.$,{variant:"ghost",onClick:()=>I("gm_name"),className:"px-1 group",children:["GM Name ","gm_name"===k.key?(0,t.jsx)(x.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50 group-hover:opacity-100 transition-opacity"}):(0,t.jsx)(x.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-0 group-hover:opacity-50 transition-opacity"})]})}),Z.map(e=>(0,t.jsx)(o.nd,{className:"p-2 border text-center text-xs md:text-sm whitespace-nowrap",children:e},e)),(0,t.jsx)(o.nd,{className:"p-2 border text-center text-xs md:text-sm whitespace-nowrap font-bold bg-muted/50",children:"GM Avg"})]})}),(0,t.jsx)(o.BF,{children:G.map(e=>{var a;let r;let n=null===(a=s.gmAverages)||void 0===a?void 0:a.find(a=>{var s;return a.gm_name===e||a.gm_id&&(null===(s=d.find(a=>a.gm_name===e))||void 0===s?void 0:s.gm_id)===a.gm_id});n&&P in n&&(r=n[P]);let l={season_id:0,gm_id:(null==n?void 0:n.gm_id)||0,gm_name:e,avg_pvdre:null==n?void 0:n.avg_pvdre,pvdre_hit_rate:null==n?void 0:n.pvdre_hit_rate,avg_value_vs_adp:null==n?void 0:n.avg_value_vs_adp};return(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nA,{className:"font-medium sticky left-0 bg-card z-10 p-2 border text-xs md:text-sm whitespace-nowrap",children:e}),Z.map(a=>{var s,r,n,l,i,d,c,x,u;let h=null===(s=C[e])||void 0===s?void 0:s[a],p=null==h?void 0:h[P],f=H(h,P,D,S),v=K[P].format(p);return(0,t.jsx)(o.nA,{className:"p-0 border text-center text-xs md:text-sm",style:{minWidth:"70px"},children:(0,t.jsxs)(m.m_,{delayDuration:100,children:[(0,t.jsx)(m.k$,{asChild:!0,children:(0,t.jsx)("div",{className:(0,_.cn)("p-2 h-full w-full flex items-center justify-center",f),children:v})}),h&&(0,t.jsx)(m.ZI,{className:"bg-popover text-popover-foreground p-3 rounded-md shadow-lg max-w-xs w-auto",children:(0,t.jsxs)("div",{className:"space-y-1.5 text-left",children:[(0,t.jsxs)("p",{className:"font-semibold",children:[h.gm_name," - ",h.season_id]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"POE per pick:"})," ",null!==(i=null===(r=h.avg_pvdre)||void 0===r?void 0:r.toFixed(2))&&void 0!==i?i:"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Hit Rate:"})," ",void 0!==h.pvdre_hit_rate&&null!==h.pvdre_hit_rate?(100*h.pvdre_hit_rate).toFixed(1)+"%":"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Avg Value vs ADP:"})," ",null!==(d=null===(n=h.avg_value_vs_adp)||void 0===n?void 0:n.toFixed(1))&&void 0!==d?d:"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Total Picks:"})," ",null!==(c=h.total_picks)&&void 0!==c?c:"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"1st Round Pos:"})," ",null!==(x=h.first_round_draft_position)&&void 0!==x?x:"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Total POE:"})," ",null!==(u=null===(l=h.total_pvdre)||void 0===l?void 0:l.toFixed(2))&&void 0!==u?u:"N/A"]})]})})]})},"".concat(e,"-").concat(a,"-").concat(P))}),(0,t.jsx)(o.nA,{className:"p-0 border text-center text-xs md:text-sm font-bold bg-muted/50",style:{minWidth:"70px"},children:(0,t.jsxs)(m.m_,{delayDuration:100,children:[(0,t.jsx)(m.k$,{asChild:!0,children:(0,t.jsx)("div",{className:(0,_.cn)("p-2 h-full w-full flex items-center justify-center",H(l,P,M,F)),children:K[P].format(r)})}),(0,t.jsxs)(m.ZI,{className:"bg-popover text-popover-foreground p-3 rounded-md shadow-lg max-w-xs w-auto",children:[(0,t.jsxs)("p",{className:"font-semibold",children:[e," - Career Avg"]}),(0,t.jsxs)("p",{children:[(0,t.jsxs)("span",{className:"font-medium",children:[K[P].tooltipLabel,":"]})," ",K[P].format(r)]})]})]})})]},e)})}),(0,t.jsx)(o.Gg,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nA,{className:"font-bold sticky left-0 bg-muted/60 z-10 p-2 border text-xs md:text-sm whitespace-nowrap",children:"Season Avg"}),Z.map(e=>{var a;let r;let n=null===(a=s.seasonAverages)||void 0===a?void 0:a.find(a=>a.season_id.toString()===e);n&&P in n&&(r=n[P]);let l={season_id:parseInt(e),gm_id:0,gm_name:"League Average",avg_pvdre:null==n?void 0:n.avg_pvdre,pvdre_hit_rate:null==n?void 0:n.pvdre_hit_rate,avg_value_vs_adp:null==n?void 0:n.avg_value_vs_adp};return(0,t.jsx)(o.nA,{className:"p-0 border text-center text-xs md:text-sm font-bold bg-muted/60",style:{minWidth:"70px"},children:(0,t.jsxs)(m.m_,{delayDuration:100,children:[(0,t.jsx)(m.k$,{asChild:!0,children:(0,t.jsx)("div",{className:(0,_.cn)("p-2 h-full w-full flex items-center justify-center",H(l,P,O,B)),children:K[P].format(r)})}),(0,t.jsxs)(m.ZI,{className:"bg-popover text-popover-foreground p-3 rounded-md shadow-lg max-w-xs w-auto",children:[(0,t.jsxs)("p",{className:"font-semibold",children:[e," Season Average"]}),(0,t.jsxs)("p",{children:[(0,t.jsxs)("span",{className:"font-medium",children:[K[P].tooltipLabel,":"]})," ",K[P].format(r)]})]})]})},"season-avg-".concat(e))}),(0,t.jsx)(o.nA,{className:"p-0 border text-center text-xs md:text-sm font-bold bg-muted/80",style:{minWidth:"70px"},children:(0,t.jsxs)(m.m_,{delayDuration:100,children:[(0,t.jsx)(m.k$,{asChild:!0,children:(0,t.jsx)("div",{className:(0,_.cn)("p-2 h-full w-full flex items-center justify-center",H({avg_pvdre:R,pvdre_hit_rate:R,avg_value_vs_adp:R},P,D,S)),children:K[P].format(R)})}),(0,t.jsxs)(m.ZI,{className:"bg-popover text-popover-foreground p-3 rounded-md shadow-lg max-w-xs w-auto",children:[(0,t.jsx)("p",{className:"font-semibold",children:"Overall League Average"}),(0,t.jsxs)("p",{children:[(0,t.jsxs)("span",{className:"font-medium",children:[K[P].tooltipLabel,":"]})," ",K[P].format(R)]})]})]})})]})})]})})})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mt-6",children:[(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"text-green-500"})," All-Time Top Draft Steals"]})}),(0,t.jsx)(i.Wu,{children:s.allTimeDraftSteals&&s.allTimeDraftSteals.length>0?(0,t.jsxs)(o.XI,{children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{children:"Player"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Season"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Overall Pick"}),(0,t.jsx)(o.nd,{children:"GM"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Drafted (Pos)"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Finished (Pos)"}),(0,t.jsx)(o.nd,{className:"text-right",children:"PVDRE"})]})}),(0,t.jsx)(o.BF,{children:s.allTimeDraftSteals.slice(0,10).map((e,a)=>{var s,r,n;return(0,t.jsxs)(o.Hj,{children:[(0,t.jsxs)(o.nA,{className:"font-medium",children:[e.player_name," (",e.nfl_team_id||"N/A",")"]}),(0,t.jsx)(o.nA,{className:"text-center",children:e.season_id}),(0,t.jsx)(o.nA,{className:"text-center",children:e.pick_overall}),(0,t.jsx)(o.nA,{children:e.gm_name}),(0,t.jsx)(o.nA,{className:"text-center",children:(0,t.jsxs)(y.E,{variant:"outline",className:(0,_.hI)(e.player_position),children:[e.player_position||"N/A",null!==(r=e.league_positional_draft_rank)&&void 0!==r?r:""]})}),(0,t.jsx)(o.nA,{className:"text-center",children:null!==e.actual_positional_finish_rank&&void 0!==e.actual_positional_finish_rank?(0,t.jsxs)(y.E,{variant:"outline",className:(0,_.hI)(e.player_position),children:[e.player_position||"N/A",e.actual_positional_finish_rank]}):"-"}),(0,t.jsx)(o.nA,{className:"text-right font-semibold text-green-600",children:null!==(n=null===(s=e.pvdre_points_vs_league_draft_rank_exp)||void 0===s?void 0:s.toFixed(1))&&void 0!==n?n:"N/A"})]},"steal-".concat(e.player_id,"-").concat(e.season_id,"-").concat(a))})})]}):(0,t.jsx)("p",{className:"text-muted-foreground text-center",children:"No all-time steals data available."})})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"text-red-500"})," All-Time Top Draft Busts"]})}),(0,t.jsx)(i.Wu,{children:s.allTimeDraftBusts&&s.allTimeDraftBusts.length>0?(0,t.jsxs)(o.XI,{children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{children:"Player"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Season"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Overall Pick"}),(0,t.jsx)(o.nd,{children:"GM"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Drafted (Pos)"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Finished (Pos)"}),(0,t.jsx)(o.nd,{className:"text-right",children:"PVDRE"})]})}),(0,t.jsx)(o.BF,{children:s.allTimeDraftBusts.slice(0,10).map((e,a)=>{var s,r,n;return(0,t.jsxs)(o.Hj,{children:[(0,t.jsxs)(o.nA,{className:"font-medium",children:[e.player_name," (",e.nfl_team_id||"N/A",")"]}),(0,t.jsx)(o.nA,{className:"text-center",children:e.season_id}),(0,t.jsx)(o.nA,{className:"text-center",children:e.pick_overall}),(0,t.jsx)(o.nA,{children:e.gm_name}),(0,t.jsx)(o.nA,{className:"text-center",children:(0,t.jsxs)(y.E,{variant:"outline",className:(0,_.hI)(e.player_position),children:[e.player_position||"N/A",null!==(r=e.league_positional_draft_rank)&&void 0!==r?r:""]})}),(0,t.jsx)(o.nA,{className:"text-center",children:null!==e.actual_positional_finish_rank&&void 0!==e.actual_positional_finish_rank?(0,t.jsxs)(y.E,{variant:"outline",className:(0,_.hI)(e.player_position),children:[e.player_position||"N/A",e.actual_positional_finish_rank]}):"-"}),(0,t.jsx)(o.nA,{className:"text-right font-semibold text-red-600",children:null!==(n=null===(s=e.pvdre_points_vs_league_draft_rank_exp)||void 0===s?void 0:s.toFixed(1))&&void 0!==n?n:"N/A"})]},"bust-".concat(e.player_id,"-").concat(e.season_id,"-").concat(a))})})]}):(0,t.jsx)("p",{className:"text-muted-foreground text-center",children:"No all-time busts data available."})})]})]})]})}):(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(u,{})," Draft Performance Heatmap"]}),(0,t.jsx)(i.BT,{children:(null===(a=K[P])||void 0===a?void 0:a.description)||"GM draft performance metrics across seasons. Colors indicate performance relative to the average."})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsx)("p",{children:"No draft performance data available. Please ensure 'gm_season_performance_grid.json' exists in 'public/data/draft_data/' and is correctly formatted."})})]})},Q=(e,a,s)=>{if(null==e)return"bg-muted/30 text-muted-foreground";let t="font-semibold ",r=s-a;if(0===r)return t+"bg-neutral-100 text-neutral-700";let n=(e-a)/r;if(n>=.45&&n<=.55)return t+"bg-neutral-100 text-neutral-700";if(n<.45){let e=Math.min(1,(.45-n)/.45);return e>.66?t+"bg-red-300 text-red-800":e>.33?t+"bg-red-200 text-red-800":t+"bg-red-100 text-red-700"}{let e=Math.min(1,(n-.55)/.44999999999999996);return e>.66?t+"bg-green-300 text-green-800":e>.33?t+"bg-green-200 text-green-800":t+"bg-green-100 text-green-700"}},ee=e=>{if(null==e)return"bg-muted/30 text-muted-foreground";let a="font-semibold ";return e>.1?e>10?a+"bg-green-300 text-green-800":e>5?a+"bg-green-200 text-green-800":a+"bg-green-100 text-green-700":e<-.1?e<-10?a+"bg-red-300 text-red-800":e<-5?a+"bg-red-200 text-red-800":a+"bg-red-100 text-red-700":a+"bg-neutral-100 text-neutral-700"},ea=()=>{var e,a;let[s,n]=(0,r.useState)(null===(e=q[0])||void 0===e?void 0:e.id),[l,x]=(0,r.useState)(null),[u,f]=(0,r.useState)(null),[v,g]=(0,r.useState)(null),[j,b]=(0,r.useState)(null),[A,k]=(0,r.useState)(!1),[w,P]=(0,r.useState)(null),[E,D]=(0,r.useState)("none");(0,r.useEffect)(()=>{s&&(async()=>{k(!0),P(null),x(null),f(null),g(null),b(null);try{let t="/data/draft_data/seasons/season_".concat(s,"_draft_detail.json");console.log("[SeasonDraftDetail] Fetching ".concat(t));let r=await fetch(t);if(!r.ok){let e=await r.text();throw console.error("[SeasonDraftDetail] Fetch failed for season draft data (Status: ".concat(r.status,"):"),e.substring(0,200)),Error("Failed to fetch data for season ".concat(s,": ").concat(r.status," ").concat(r.statusText,"."))}let n=await r.json();if(console.log("[SeasonDraftDetail] Fetched raw JSON data for season ".concat(s,":"),n),"object"==typeof n&&null!==n&&Array.isArray(n.draft_board)){var e,a;x(n.draft_board),f(n.team_draft_performance_ranking||null),g((null===(e=n.season_highlights)||void 0===e?void 0:e.top_steals_by_pvdre)||null),b((null===(a=n.season_highlights)||void 0===a?void 0:a.top_busts_by_pvdre)||null),console.log("[SeasonDraftDetail] Successfully processed draft_board and other sections for season ".concat(s,"."))}else console.error("[SeasonDraftDetail] Fetched data for season ".concat(s," is not in the expected object format with a 'draft_board' array. Received:"),n),P("Data for season ".concat(s,' is not in the expected format. Ensure the JSON file has a "draft_board" array and optionally "team_draft_performance_ranking", "season_highlights.top_steals_by_pvdre", "season_highlights.top_busts_by_pvdre".')),x(null)}catch(e){e instanceof Error?P("Error loading draft data: ".concat(e.message)):P("An unknown error occurred while fetching season draft data."),console.error("[SeasonDraftDetail] Error in fetchData for season draft data:",e),x(null)}finally{k(!1)}})()},[s]);let{draftBoardPicks:S,gmNamesForColumns:M,maxRound:F,numGms:O,minPVDRE:B,maxPVDRE:R}=(0,r.useMemo)(()=>{if(!l||!Array.isArray(l))return console.warn("[SeasonDraftDetail useMemo] draftData is not an array or is null. draftData:",l),{draftBoardPicks:{},gmNamesForColumns:[],maxRound:0,numGms:0,minPVDRE:0,maxPVDRE:0};let e=[...l].sort((e,a)=>e.pick_overall-a.pick_overall),a={},s=1/0,t=-1/0;e.forEach(e=>{if("string"!=typeof e.gm_name||"number"!=typeof e.round||"number"!=typeof e.pick_in_round||"number"!=typeof e.pick_overall){console.warn("[SeasonDraftDetail useMemo] Invalid pick data encountered (missing gm_name, round, pick_in_round or pick_overall):",e);return}a[e.pick_overall]=e,null!==e.pvdre_points_vs_league_draft_rank_exp&&void 0!==e.pvdre_points_vs_league_draft_rank_exp&&(s=Math.min(s,e.pvdre_points_vs_league_draft_rank_exp),t=Math.max(t,e.pvdre_points_vs_league_draft_rank_exp))});let r=new Map,n=new Set,i=0;e.forEach(e=>{"string"==typeof e.gm_name&&"number"==typeof e.round&&"number"==typeof e.pick_in_round&&"number"==typeof e.pick_overall&&(n.add(e.gm_name),e.round>i&&(i=e.round),(!r.has(e.gm_name)||e.pick_overall<r.get(e.gm_name))&&r.set(e.gm_name,e.pick_overall))});let d=Array.from(n).sort((e,a)=>{var s,t;let n=null!==(s=r.get(e))&&void 0!==s?s:1/0,l=null!==(t=r.get(a))&&void 0!==t?t:1/0;return n===1/0&&l===1/0?e.localeCompare(a):n-l}),o=d.length;return{draftBoardPicks:a,gmNamesForColumns:d,maxRound:i,numGms:o,minPVDRE:s===1/0?0:s,maxPVDRE:t===-1/0?0:t}},[l]);return(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Season Draft View"}),(0,t.jsx)(i.BT,{children:"Select a season to view its draft board and analysis."})]}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[(0,t.jsxs)(d.l6,{value:s,onValueChange:n,children:[(0,t.jsx)(d.bq,{className:"w-full sm:w-[280px]",children:(0,t.jsx)(d.yv,{placeholder:"Select a season's draft"})}),(0,t.jsx)(d.gC,{children:q.map(e=>(0,t.jsxs)(d.eb,{value:e.id,children:[e.year," Draft"]},e.id))})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(I,{id:"value-analysis",checked:"value"===E,onCheckedChange:e=>D(e?"value":"none")}),(0,t.jsx)(N.J,{htmlFor:"value-analysis",className:"text-sm",children:"Value Analysis"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(I,{id:"reach-steal",checked:"reachSteal"===E,onCheckedChange:e=>D(e?"reachSteal":"none")}),(0,t.jsx)(N.J,{htmlFor:"reach-steal",className:"text-sm",children:"Reach/Steal"})]})]})]}),s&&(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{children:[null===(a=q.find(e=>e.id===s))||void 0===a?void 0:a.year," Draft Board"]}),(0,t.jsx)(i.BT,{children:"Interactive draft board. Color-coded by position. Hover for details."})]}),(0,t.jsx)(i.Wu,{children:A&&!l?(0,t.jsx)(c.E,{className:"h-[400px] w-full"}):w&&!l?(0,t.jsxs)("p",{className:"text-destructive text-center py-4",children:["Error loading draft data: ",w]}):l&&0!==M.length&&0!==F?(0,t.jsx)(m.Bc,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(o.XI,{className:"min-w-full border-separate border-spacing-0",children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{className:"sticky left-0 bg-card z-20 p-1.5 border text-xs text-center font-semibold rounded-tl-sm",children:"Round"}),M.map((e,a)=>(0,t.jsx)(o.nd,{className:(0,_.cn)("p-1.5 border text-xs text-center font-semibold whitespace-nowrap min-w-[120px]",a===M.length-1&&"rounded-tr-sm"),children:e},e))]})}),(0,t.jsx)(o.BF,{children:Array.from({length:F},(e,a)=>a+1).map(e=>(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nA,{className:"sticky left-0 bg-card z-20 p-1.5 border text-xs text-center font-semibold rounded-l-sm",children:e}),M.map((a,s)=>{var r,n,l,i,d,c,x,u,h,p,f,v,g,j,N;let y,b;y=e%2!=0?s+1:O-s;let A=S[(e-1)*O+y],k="p-1.5 border text-xs align-middle h-[60px] rounded-md";if(s===M.length-1&&e===F?k=(0,_.cn)(k,"rounded-br-sm"):s===M.length-1?k=(0,_.cn)(k,"rounded-r-sm"):e===F&&0===s&&M.find(e=>e===(null==A?void 0:A.gm_name)),!A)return(0,t.jsx)(o.nA,{className:(0,_.cn)(k,"bg-muted/20"),style:{minWidth:"120px",height:"60px"}},"".concat(e,"-").concat(s,"-empty"));let w="flex items-center justify-center h-full w-full text-center";return"none"===E?(w="flex flex-col items-center justify-center h-full w-full text-center",b=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"font-semibold truncate w-full",title:A.player_name,children:A.player_name}),(0,t.jsxs)("p",{className:"text-muted-foreground truncate w-full text-xs",children:[A.player_position," - ",A.nfl_team_id]})]}),k=(0,_.cn)(k,(0,_.hI)(A.player_position))):"value"===E?(b=(0,t.jsx)("p",{className:"font-semibold",children:null!==(x=null===(c=A.pvdre_points_vs_league_draft_rank_exp)||void 0===c?void 0:c.toFixed(1))&&void 0!==x?x:"N/A"}),k=(0,_.cn)(k,Q(A.pvdre_points_vs_league_draft_rank_exp,B,R))):(b=(0,t.jsx)("p",{className:"font-semibold",children:null!==(h=null===(u=A.overall_reach_steal_value)||void 0===u?void 0:u.toFixed(1))&&void 0!==h?h:"N/A"}),k=(0,_.cn)(k,ee(A.overall_reach_steal_value))),(0,t.jsx)(o.nA,{className:k,style:{minWidth:"120px",height:"60px"},children:(0,t.jsxs)(m.m_,{delayDuration:100,children:[(0,t.jsx)(m.k$,{asChild:!0,children:(0,t.jsx)("div",{className:w,children:b})}),(0,t.jsx)(m.ZI,{className:"bg-popover text-popover-foreground p-3 rounded-md shadow-lg max-w-xs w-auto",children:(0,t.jsxs)("div",{className:"space-y-1.5 text-left text-xs",children:[(0,t.jsxs)("p",{className:"font-bold text-sm",children:[A.player_name," (",A.nfl_team_id,")"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Picked By:"})," ",A.gm_name," (",A.fantasy_team_name,")"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Overall Pick:"})," ",A.pick_overall," (Round ",A.round,", Pick ",A.pick_in_round,")"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Overall ADP:"})," ",null!==(p=null===(r=A.overall_adp_rank)||void 0===r?void 0:r.toFixed(1))&&void 0!==p?p:"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Reach/Steal Value:"})," ",null!==(f=null===(n=A.overall_reach_steal_value)||void 0===n?void 0:n.toFixed(1))&&void 0!==f?f:"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Drafted Pos:"})," ",A.player_position,null!==(v=A.league_positional_draft_rank)&&void 0!==v?v:""]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Finished Pos:"})," ",null!==A.actual_positional_finish_rank&&void 0!==A.actual_positional_finish_rank?"".concat(A.player_position).concat(A.actual_positional_finish_rank):"-"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Expected Points:"})," ",null!==(g=null===(l=A.expected_points_for_league_draft_rank_smoothed)||void 0===l?void 0:l.toFixed(1))&&void 0!==g?g:"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Actual Points:"})," ",null!==(j=null===(i=A.actual_total_fantasy_points_season)||void 0===i?void 0:i.toFixed(1))&&void 0!==j?j:"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"POE:"})," ",null!==(N=null===(d=A.pvdre_points_vs_league_draft_rank_exp)||void 0===d?void 0:d.toFixed(1))&&void 0!==N?N:"N/A"]})]})})]})},A.player_id||"".concat(e,"-").concat(s,"-").concat(A.pick_overall))})]},e))})]})})}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No draft data available for the selected season, or data is malformed. Check console for details."})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsx)(i.ZB,{children:"Team Draft Performance"})}),(0,t.jsxs)(i.Wu,{children:[A&&!u&&(0,t.jsx)(c.E,{className:"h-24 w-full"}),!A&&w&&(0,t.jsx)("p",{className:"text-destructive text-center py-4",children:"Error loading draft performance data."}),!A&&!w&&u&&u.length>0&&(0,t.jsxs)(o.XI,{children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{children:"GM"}),(0,t.jsx)(o.nd,{className:"text-right",children:"Avg POE (Per Pick)"}),(0,t.jsx)(o.nd,{className:"text-right",children:"Hit Rate"})]})}),(0,t.jsx)(o.BF,{children:u.sort((e,a)=>{var s,t;return(null!==(s=a.avg_pvdre_per_pick)&&void 0!==s?s:-1/0)-(null!==(t=e.avg_pvdre_per_pick)&&void 0!==t?t:-1/0)}).map((e,a)=>{var s,r,n,l;return(0,t.jsxs)(o.Hj,{children:[(0,t.jsxs)(o.nA,{children:[(0,t.jsx)("p",{className:"font-medium",children:e.gm_name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.fantasy_team_name})]}),(0,t.jsx)(o.nA,{className:"text-right font-semibold",children:null!==(n=null===(s=e.avg_pvdre_per_pick)||void 0===s?void 0:s.toFixed(2))&&void 0!==n?n:"N/A"}),(0,t.jsxs)(o.nA,{className:"text-right",children:[null!==(l=null===(r=e.hit_rate_percentage)||void 0===r?void 0:r.toFixed(1))&&void 0!==l?l:"N/A","%"]})]},a)})})]}),!A&&!w&&(!u||0===u.length)&&(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No team draft performance data available for this season."})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsx)(i.ZB,{children:"Season's Top Steals & Busts"})}),(0,t.jsxs)(i.Wu,{children:[A&&(!v||!j)&&(0,t.jsx)(c.E,{className:"h-48 w-full"}),!A&&w&&(0,t.jsx)("p",{className:"text-destructive text-center py-4",children:"Error loading steals/busts."}),!A&&!w&&(v||j)&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-semibold mb-2 flex items-center",children:[(0,t.jsx)(h.A,{className:"text-green-500 mr-2 h-5 w-5"})," Top Steals"]}),v&&v.length>0?(0,t.jsxs)(o.XI,{children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{children:"Player"}),(0,t.jsx)(o.nd,{children:"Pos"}),(0,t.jsx)(o.nd,{className:"text-right",children:"POE (Points Over Expected)"})]})}),(0,t.jsx)(o.BF,{children:v.slice(0,5).map((e,a)=>{var s,r;return(0,t.jsxs)(o.Hj,{children:[(0,t.jsxs)(o.nA,{children:[(0,t.jsx)("p",{className:"font-medium",children:e.player_name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Picked by ",e.gm_name," (Overall: ",e.pick_overall,")"]})]}),(0,t.jsx)(o.nA,{children:(0,t.jsx)(y.E,{variant:"outline",className:(0,_.hI)(e.player_position),children:e.player_position})}),(0,t.jsx)(o.nA,{className:"text-right text-green-600 font-semibold",children:null!==(r=null===(s=e.pvdre_points_vs_league_draft_rank_exp)||void 0===s?void 0:s.toFixed(1))&&void 0!==r?r:"N/A"})]},"steal-".concat(a))})})]}):(0,t.jsx)("p",{className:"text-muted-foreground text-sm text-center py-3",children:"No top steals data available."})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-semibold mb-2 flex items-center",children:[(0,t.jsx)(p.A,{className:"text-red-500 mr-2 h-5 w-5"})," Top Busts"]}),j&&j.length>0?(0,t.jsxs)(o.XI,{children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{children:"Player"}),(0,t.jsx)(o.nd,{children:"Pos"}),(0,t.jsx)(o.nd,{className:"text-right",children:"POE (Points Over Expected)"})]})}),(0,t.jsx)(o.BF,{children:j.slice(0,5).map((e,a)=>{var s,r;return(0,t.jsxs)(o.Hj,{children:[(0,t.jsxs)(o.nA,{children:[(0,t.jsx)("p",{className:"font-medium",children:e.player_name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Picked by ",e.gm_name," (Overall: ",e.pick_overall,")"]})]}),(0,t.jsx)(o.nA,{children:(0,t.jsx)(y.E,{variant:"outline",className:(0,_.hI)(e.player_position),children:e.player_position})}),(0,t.jsx)(o.nA,{className:"text-right text-red-600 font-semibold",children:null!==(r=null===(s=e.pvdre_points_vs_league_draft_rank_exp)||void 0===s?void 0:s.toFixed(1))&&void 0!==r?r:"N/A"})]},"bust-".concat(a))})})]}):(0,t.jsx)("p",{className:"text-muted-foreground text-sm text-center py-3",children:"No top busts data available."})]})]}),!A&&!w&&!v&&!j&&(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No steals or busts data available for this season."})]})]})]})]})]})})},es=e=>null==e?"N/A":(e>=0?"+":"")+e.toFixed(1),et=()=>{var e,a;let[s,n]=(0,r.useState)(null===(e=U[0])||void 0===e?void 0:e.id),[l,m]=(0,r.useState)(null),[x,u]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null);(0,r.useEffect)(()=>{s&&(async()=>{u(!0),N(null),m(null);try{var e;let a=U.find(e=>e.id===s);if(!a)throw Error("Selected GM not found in mock data.");let t="/data/draft_data/gm/gm_".concat(s,"_draft_history.json");console.log("[GMDraftHistory] Fetching ".concat(t));let r=await fetch(t);if(!r.ok){let e=await r.text();throw console.error("[GMDraftHistory] Fetch failed for GM ".concat(s," (Status: ").concat(r.status,"):"),e.substring(0,200)),Error("Failed to fetch data for GM ".concat(a.name,": ").concat(r.status," ").concat(r.statusText))}let n=await r.json();console.log("[GMDraftHistory] Fetched data for GM ".concat(s,":"),n),n.gm_name!==a.name&&(null===(e=n.gm_id)||void 0===e?void 0:e.toString())!==s&&console.warn("[GMDraftHistory] Mismatch between selected GM (".concat(a.name,", ID ").concat(s,") and fetched data (").concat(n.gm_name,", ID ").concat(n.gm_id,"). Using fetched data.")),m(n)}catch(e){e instanceof Error?N(e.message):N("An unknown error occurred"),console.error("[GMDraftHistory] Error in fetchData for GM ".concat(s,":"),e),m(null)}finally{u(!1)}})()},[s]);let b=(0,r.useMemo)(()=>(null==l?void 0:l.round_efficiency.map(e=>({name:"R".concat(e.round.toFixed(0)),"Avg POE":e.average_pvdre})))||[],[null==l?void 0:l.round_efficiency]);return((0,r.useMemo)(()=>(null==l?void 0:l.positional_profile)?l.positional_profile.map(e=>{var a;return{name:e.position,"GM Avg POE":e.gm_average_pvdre,"League Avg POE":null!==(a=e.league_average_pvdre)&&void 0!==a?a:0}}):[],[null==l?void 0:l.positional_profile]),s)?(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,t.jsx)("div",{children:(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{})," ",(null==l?void 0:l.gm_name)||(null===(a=U.find(e=>e.id===s))||void 0===a?void 0:a.name)||"GM","'s Draft History"]})}),(0,t.jsxs)(d.l6,{value:s,onValueChange:n,children:[(0,t.jsx)(d.bq,{className:"w-full sm:w-[280px] mt-2 sm:mt-0",children:(0,t.jsx)(d.yv,{placeholder:"Select a GM"})}),(0,t.jsx)(d.gC,{children:U.map(e=>(0,t.jsx)(d.eb,{value:e.id,children:e.name},e.id))})]})]}),(0,t.jsxs)(i.Wu,{children:[x&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(c.E,{className:"h-24 w-full"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(c.E,{className:"h-64 w-full"}),(0,t.jsx)(c.E,{className:"h-64 w-full"})]}),(0,t.jsx)(c.E,{className:"h-48 w-full"})]}),j&&(0,t.jsxs)("p",{className:"text-destructive text-center py-4",children:["Error loading draft history data: ",j]}),!x&&!l&&!j&&(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No draft history data found for this GM. Ensure 'gm_GMID_draft_history.json' exists in 'public/data/draft_data/gm/'."}),!x&&l&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4 pt-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center text-center p-3 rounded-md bg-muted/50 shadow-sm",children:[(0,t.jsx)("p",{className:"text-xs uppercase text-muted-foreground font-medium",children:"Total Picks Made"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:l.career_summary.total_picks_made})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center text-center p-3 rounded-md bg-muted/50 shadow-sm",children:[(0,t.jsx)("p",{className:"text-xs uppercase text-muted-foreground font-medium",children:"Total Hits"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:l.career_summary.total_hits})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center text-center p-3 rounded-md bg-muted/50 shadow-sm",children:[(0,t.jsx)("p",{className:"text-xs uppercase text-muted-foreground font-medium",children:"Total Misses"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:l.career_summary.total_misses})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center text-center p-3 rounded-md bg-muted/50 shadow-sm",children:[(0,t.jsx)("p",{className:"text-xs uppercase text-muted-foreground font-medium",children:"Career Hit Rate"}),(0,t.jsxs)("p",{className:"text-2xl font-bold",children:[l.career_summary.career_hit_rate_percentage.toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center text-center p-3 rounded-md bg-muted/50 shadow-sm",children:[(0,t.jsx)("p",{className:"text-xs uppercase text-muted-foreground font-medium",children:"Sum Total POE"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:l.career_summary.sum_total_pvdre.toFixed(2)})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center text-center p-3 rounded-md bg-muted/50 shadow-sm",children:[(0,t.jsx)("p",{className:"text-xs uppercase text-muted-foreground font-medium",children:"Avg. POE / Pick"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:l.career_summary.average_pvdre_per_pick.toFixed(2)})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsx)(i.ZB,{className:"text-lg",children:"Round Efficiency (Avg. POE)"})}),(0,t.jsx)(i.Wu,{className:"h-[300px]",children:(0,t.jsx)(T.u,{width:"100%",height:"100%",children:(0,t.jsxs)(W.E,{data:b,children:[(0,t.jsx)(L.d,{strokeDasharray:"3 3"}),(0,t.jsx)(V.W,{dataKey:"name"}),(0,t.jsx)(z.h,{}),(0,t.jsx)(X.m,{formatter:e=>e.toFixed(1)}),(0,t.jsx)(J.y,{dataKey:"Avg POE",fill:"hsl(var(--primary))",children:b.map((e,a)=>(0,t.jsx)($.f,{fill:e["Avg POE"]>=0?"hsl(var(--chart-2))":"hsl(var(--destructive))"},"cell-".concat(a)))})]})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)(i.ZB,{className:"text-lg flex items-center",children:[(0,t.jsx)(h.A,{className:"text-green-500 mr-2 h-5 w-5"}),"Best Picks (by POE)"]})}),(0,t.jsx)(i.Wu,{children:l.best_picks&&l.best_picks.length>0?(0,t.jsxs)(o.XI,{children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{children:"Player (Team)"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Season"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Pick (Overall)"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Drafted (Pos)"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Finished (Pos)"}),(0,t.jsx)(o.nd,{className:"text-right",children:"POE"})]})}),(0,t.jsx)(o.BF,{children:l.best_picks.slice(0,5).map(e=>{var a,s,r;return(0,t.jsxs)(o.Hj,{children:[(0,t.jsxs)(o.nA,{className:"font-medium",children:[e.player_name," (",e.nfl_team_id||"N/A",")"]}),(0,t.jsx)(o.nA,{className:"text-center",children:e.season_id}),(0,t.jsx)(o.nA,{className:"text-center",children:e.pick_overall}),(0,t.jsx)(o.nA,{className:"text-center",children:(0,t.jsxs)(y.E,{variant:"outline",className:(0,_.hI)(e.player_position),children:[e.player_position,null!==(r=e.league_positional_draft_rank)&&void 0!==r?r:""]})}),(0,t.jsx)(o.nA,{className:"text-center",children:null!==e.actual_positional_finish_rank&&void 0!==e.actual_positional_finish_rank?(0,t.jsxs)(y.E,{variant:"outline",className:(0,_.hI)(e.player_position),children:[e.player_position,e.actual_positional_finish_rank]}):"-"}),(0,t.jsx)(o.nA,{className:"text-right text-green-600 font-semibold",children:null===(a=e.pvdre_points_vs_league_draft_rank_exp)||void 0===a?void 0:a.toFixed(1)})]},e.player_id+((null===(s=e.draft_id)||void 0===s?void 0:s.toString())||e.pick_overall.toString()))})})]}):(0,t.jsx)("p",{className:"text-muted-foreground",children:"No best picks data available."})})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)(i.ZB,{className:"text-lg flex items-center",children:[(0,t.jsx)(p.A,{className:"text-red-500 mr-2 h-5 w-5"}),"Worst Picks (by POE)"]})}),(0,t.jsx)(i.Wu,{children:l.worst_picks&&l.worst_picks.length>0?(0,t.jsxs)(o.XI,{children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{children:"Player (Team)"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Season"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Pick (Overall)"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Drafted (Pos)"}),(0,t.jsx)(o.nd,{className:"text-center",children:"Finished (Pos)"}),(0,t.jsx)(o.nd,{className:"text-right",children:"POE"})]})}),(0,t.jsx)(o.BF,{children:l.worst_picks.slice(0,5).map(e=>{var a,s,r;return(0,t.jsxs)(o.Hj,{children:[(0,t.jsxs)(o.nA,{className:"font-medium",children:[e.player_name," (",e.nfl_team_id||"N/A",")"]}),(0,t.jsx)(o.nA,{className:"text-center",children:e.season_id}),(0,t.jsx)(o.nA,{className:"text-center",children:e.pick_overall}),(0,t.jsx)(o.nA,{className:"text-center",children:(0,t.jsxs)(y.E,{variant:"outline",className:(0,_.hI)(e.player_position),children:[e.player_position,null!==(r=e.league_positional_draft_rank)&&void 0!==r?r:""]})}),(0,t.jsx)(o.nA,{className:"text-center",children:null!==e.actual_positional_finish_rank&&void 0!==e.actual_positional_finish_rank?(0,t.jsxs)(y.E,{variant:"outline",className:(0,_.hI)(e.player_position),children:[e.player_position,e.actual_positional_finish_rank]}):"-"}),(0,t.jsx)(o.nA,{className:"text-right text-red-600 font-semibold",children:null===(a=e.pvdre_points_vs_league_draft_rank_exp)||void 0===a?void 0:a.toFixed(1)})]},e.player_id+((null===(s=e.draft_id)||void 0===s?void 0:s.toString())||e.pick_overall.toString()))})})]}):(0,t.jsx)("p",{className:"text-muted-foreground",children:"No worst picks data available."})})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{className:"text-lg",children:"Positional Performance Analysis"}),(0,t.jsx)(i.BT,{children:"Comparing GM draft value vs. league averages by position."})]}),(0,t.jsx)(i.Wu,{children:l.positional_profile&&l.positional_profile.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.positional_profile.map(e=>{let a="number"==typeof e.gm_average_pvdre&&"number"==typeof e.league_average_pvdre&&null!==e.league_average_pvdre&&e.gm_average_pvdre>e.league_average_pvdre,s="number"==typeof e.gm_average_pvdre&&"number"==typeof e.league_average_pvdre&&null!==e.league_average_pvdre&&e.gm_average_pvdre<e.league_average_pvdre,r="border-border";return a&&(r="border-green-500"),s&&(r="border-red-500"),(0,t.jsxs)(i.Zp,{className:(0,_.cn)("shadow-md",r,"border-2"),children:[(0,t.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2 pt-4 px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,_.tA)(e.position),(0,t.jsx)(i.ZB,{className:"text-base font-medium",children:e.position})]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Picks: ",e.picks_count]})]}),(0,t.jsxs)(i.Wu,{className:"px-4 pb-4 space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"GM Avg POE:"}),(0,t.jsx)("span",{className:(0,_.cn)("font-semibold","number"==typeof e.gm_average_pvdre&&e.gm_average_pvdre<0?"text-red-600":"text-green-600"),children:es(e.gm_average_pvdre)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"League Avg POE:"}),(0,t.jsx)("span",{className:(0,_.cn)("font-semibold","number"==typeof e.league_average_pvdre&&e.league_average_pvdre<0?"text-red-600":"text-green-600"),children:es(e.league_average_pvdre)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"GM Total POE:"}),(0,t.jsx)("span",{className:(0,_.cn)("font-semibold","number"==typeof e.gm_total_pvdre&&e.gm_total_pvdre<0?"text-red-600":"text-green-600"),children:es(e.gm_total_pvdre)})]})]}),(a||s)&&(0,t.jsx)(i.wL,{className:"pt-0 pb-3 px-4",children:(0,t.jsxs)("div",{className:(0,_.cn)("flex items-center text-xs font-medium",a?"text-green-600":"text-red-600"),children:[a?(0,t.jsx)(v.A,{size:16,className:"mr-1"}):(0,t.jsx)(g.A,{size:16,className:"mr-1"}),a?"Outperforming League Avg":"Underperforming League Avg"]})})]},e.position)})}):(0,t.jsx)("p",{className:"text-muted-foreground",children:"No positional profile data available."})})]})]})]})]})}):(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{})," GM Draft History"]})}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)(d.l6,{onValueChange:n,children:[(0,t.jsx)(d.bq,{className:"w-full sm:w-[280px]",children:(0,t.jsx)(d.yv,{placeholder:"Select a GM"})}),(0,t.jsx)(d.gC,{children:U.map(e=>(0,t.jsx)(d.eb,{value:e.id,children:e.name},e.id))})]})})]})};function er(){let e=(0,n.useSearchParams)().get("section")||"overview";return(0,t.jsxs)("div",{className:"space-y-6",children:["overview"===e&&(0,t.jsx)(Y,{}),"season-view"===e&&(0,t.jsx)(ea,{}),"gm-view"===e&&(0,t.jsx)(et,{})]})}},46102:(e,a,s)=>{"use strict";s.d(a,{Bc:()=>i,ZI:()=>c,k$:()=>o,m_:()=>d});var t=s(95155),r=s(12115),n=s(89613),l=s(192);let i=n.Kq,d=n.bL,o=n.l9,c=r.forwardRef((e,a)=>{let{className:s,sideOffset:r=4,...i}=e;return(0,t.jsx)(n.UC,{ref:a,sideOffset:r,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})});c.displayName=n.UC.displayName},65277:(e,a,s)=>{Promise.resolve().then(s.bind(s,27116))}},e=>{var a=a=>e(e.s=a);e.O(0,[843,507,613,511,243,994,488,441,684,358],()=>a(65277)),_N_E=e.O()}]);